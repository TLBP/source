<?xml version="1.0" encoding="UTF-8"?>
<!-- ********************************************************************
            fax-printer.xml, v1.0, GPLv2, Temmuz 2005
     ******************************************************************** -->
<article xml:id="fax-printer" xml:lang="tr">
    <info>
     <title>Faks Yazıcı NASIL</title>
     <author>
      <personname>
       <firstname>Nilgün Belma</firstname>
       <surname>Bugüner</surname>
      </personname>
      <affiliation>
       <address>
        <email>nilgun@belgeler·gen·tr</email>
       </address>
      </affiliation>
     </author>
     <pubdate>Temmuz 2005</pubdate>
     <pubdate> </pubdate>
     <revhistory>
      <revision>
       <revnumber>1.0</revnumber>
       <date>Temmuz 2005</date>
       <authorinitials>NBB</authorinitials>
       <revremark>İlk sürüm.</revremark>
      </revision>
     </revhistory>
     <legalnotice>
      <para>
Bu belgenin, <emphasis>Faks Yazıcı NASIL</emphasis> 1.0 sürümünün <emphasis role="bold"> telif hakkı © 2005 <emphasis>Nilgün Belma Bugüner</emphasis></emphasis>'e aittir.
    Bu belgeyi, Free Software Foundation tarafından
yayınlanmış bulunan GNU Genel Kamu Lisansının 2. ya da daha sonraki
sürümünün koşullarına bağlı kalarak kopyalayabilir, dağıtabilir ve/veya
değiştirebilirsiniz. Bu Lisansın özgün kopyasını <uri xlink:href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</uri> adresinde bulabilirsiniz.</para>
      <para>
BU BELGE <quote>ÜCRETSİZ</quote> OLARAK RUHSATLANDIĞI İÇİN, İÇERDİĞİ
BİLGİLER İÇİN İLGİLİ KANUNLARIN İZİN VERDİĞİ ÖLÇÜDE HERHANGİ BİR GARANTİ
VERİLMEMEKTEDİR. AKSİ YAZILI OLARAK BELİRTİLMEDİĞİ MÜDDETÇE TELİF HAKKI
SAHİPLERİ VE/VEYA BAŞKA ŞAHISLAR BELGEYİ <quote>OLDUĞU GİBİ</quote>,
AŞİKAR VEYA ZIMNEN, SATILABİLİRLİĞİ VEYA HERHANGİ BİR AMACA UYGUNLUĞU DA
DAHİL OLMAK ÜZERE HİÇBİR GARANTİ VERMEKSİZİN DAĞITMAKTADIRLAR. BİLGİNİN
KALİTESİ İLE İLGİLİ TÜM SORUNLAR SİZE AİTTİR. HERHANGİ BİR HATALI BİLGİDEN
DOLAYI DOĞABİLECEK OLAN BÜTÜN SERVİS, TAMİR VEYA DÜZELTME MASRAFLARI SİZE
AİTTİR.
  </para>
      <para>
İLGİLİ KANUNUN İCBAR ETTİĞİ DURUMLAR VEYA YAZILI ANLAŞMA HARİCİNDE HERHANGİ
BİR ŞEKİLDE TELİF HAKKI SAHİBİ VEYA YUKARIDA İZİN VERİLDİĞİ ŞEKİLDE BELGEYİ
DEĞİŞTİREN VEYA YENİDEN DAĞITAN HERHANGİ BİR KİŞİ, BİLGİNİN KULLANIMI VEYA
KULLANILAMAMASI (VEYA VERİ KAYBI OLUŞMASI, VERİNİN YANLIŞ HALE GELMESİ,
SİZİN VEYA ÜÇÜNCÜ ŞAHISLARIN ZARARA UĞRAMASI VEYA BİLGİLERİN BAŞKA BİLGİLERLE
UYUMSUZ OLMASI) YÜZÜNDEN OLUŞAN GENEL, ÖZEL, DOĞRUDAN YA DA DOLAYLI HERHANGİ
BİR ZARARDAN, BÖYLE BİR TAZMİNAT TALEBİ TELİF HAKKI SAHİBİ VEYA İLGİLİ KİŞİYE
BİLDİRİLMİŞ OLSA DAHİ, SORUMLU DEĞİLDİR.
  </para>
      <para>
Tüm telif hakları aksi özellikle belirtilmediği sürece sahibine aittir.
Belge içinde geçen herhangi bir terim, bir ticari isim ya da kuruma itibar
kazandırma olarak algılanmamalıdır. Bir ürün ya da markanın kullanılmış
olması ona onay verildiği anlamında görülmemelidir.
  </para>
     </legalnotice>
    </info>
    <section xml:id="fax-printer-kurulum">
     <info>
      <title>Kurulum</title>
     </info>
     <para>
Öncelikle sistemimizde bazı paketlerin kurulu olmasına ihtiyacımız var. Bunlar, bir faks sunucusu olarak <link xlink:href="http://www.cce.com/efax/download/">efax</link>, yazıcı sunucusu olarak <link xlink:href="http://www.cups.org/">CUPS</link>, faks alışverişini yönetmek için <link xlink:href="http://efax-gtk.sourceforge.net/">efax-gtk</link>. Bu paketler sisteminizde kurulu değilse kurun:
  </para>
     <para>
      <screen># <userinput>apt-get install cupsys efax efax-gtk</userinput>
</screen>
     </para>
     <para>
Temel olarak gerekli paketler bunlar, bağımlı paketler ve önerilenleri de kurmanızda yarar var. Benim sistemimde CUPS, Debian Sarge 3.1 kurulumu sırasında kurulmuştu. (Debian stable depolarını kullanıyorum.) Sistemimde kurulu ve adında "cups" geçen paketler şunlar: cupsys, cups-pdf, cupsomatic-ppd, cupsys-bsd, cupsys-client, cupsys-driver-gimpprint, cupsys-driver-gimpprint-data, cupsys-pt. Tabii bunların bağımlı olduğu paketler de vardır, Bunları kurarken bağımlı paketleri zaten <userinput>apt-get</userinput> kuracaktır. Bu bakımdan endişelenmek yersiz.
  </para>
     <para>
Kurulması gereken bir paket daha var ama onu Debian'ın paket depolarında göremedim. Kaynak paketini indirmek zorunda kaldım. Küçük bir paket, içinde birkaç betik var o kadar. Paketi <uri xlink:href="http://vigna.dsi.unimi.it/fax4CUPS/fax4CUPS-1.25.tar.gz">http://vigna.dsi.unimi.it/fax4CUPS/fax4CUPS-1.25.tar.gz</uri> bağından indirin ve sisteminizde uygun bir yerde paketi açın.
  </para>
     <para>
      <screen>
$ <userinput>tar xfvz fax4CUPS-1.25.tar.gz</userinput>
$ <userinput>cd fax4CUPS-1.25</userinput>
$ <userinput>su -</userinput>
Password: <emphasis>root parolanızı girin</emphasis>
# <userinput>cp efax /usr/lib/cups/backend/</userinput>
# <userinput>cp efax.ppd /usr/share/cups/model/</userinput>
</screen>
     </para>
     <para>
Böylece gerekli paketlerin kurulumları bitmiş oldu.
  </para>
    </section>
    <section xml:id="fax-printer-yapilandirma">
     <info>
      <title>Yapılandırma</title>
     </info>
     <para>
Artık kurduğumuz paketleri yapılandırmaya başlayabiliriz. <filename>/etc/printcap</filename> dosyasına şu satırları ekleyin:
  </para>
     <para>
      <screen>
fax:\
     :lp=/dev/null:\
     :sd=/var/spool/fax:\
     :if=/usr/bin/faxlpr:
</screen>
     </para>
     <para><userinput>fax</userinput> komutuna bir sabit bağ oluşturun (sembolik bağ değil):
  </para>
     <para>
      <screen># <userinput>ln /usr/bin/fax /usr/bin/faxlpr</userinput>
</screen>
     </para>
     <para>
Modeminizin bağlı bulunduğu seri port için (benimki COM1'de) tüm kullanıcılara erişim izni verip, aygıta <filename>/dev/modem</filename> sembolik bağını oluşturalım:
  </para>
     <para>
      <screen># <userinput>chmod 666 /dev/ttyS0</userinput>
# <userinput>ln -s /dev/ttyS0 /dev/modem</userinput>
</screen>
     </para>
     <para><filename>/usr/bin/fax</filename> betiğindeki bazı değerleri özelleştirmemiz lazım:
  </para>
     <para>
      <screen>
FAX=fax
EFAX=efax
EFIX=efix
DEV=modem
FROM="+90 <emphasis>üç_haneli_alankodu yedi_haneli_abone_nr</emphasis>"
NAME="<emphasis>adınız ve soyadınızı yazın</emphasis>"
PAGE=a4
PRTYPE=ps
PRCMD="lpr"
VIEWCMD="xloadimage stdin"
GS=kghostview
DIALPREFIX="T"
DIALSUFFIX=""
LOCK='-x /var/lock/LCK..$DEV'
CONFIGFILES="/etc/efax.rc ${HOME:-~}/.efaxrc ./.efaxrc"
TSTAMP='date +%d%b%H%M%S
LOOKUP='eval sed -n -e "/^fax($1):/{" -e "s/^[^:]*://p" -eq -e"}" $f'
DIRFILES="${HOME:-.}/.faxdir"
TELCVT='sed -e s/+90/1/ -e s/+/00/'     # Turkey
PAGE_letter="8.465x11in"
PAGE_legal="8.465x14in"
PAGE_a4="21x29.7cm"
RES=204x196
PRINT='$EFIX -ve -p$PAGEDIM -r300 -s0.98 -d0,0.125 -o$PRTYPE $f'
VIEW='$EFIX -ve -p$PAGEDIM -r300 -opgm $f'
INIT="-iZ -i&amp;FE0&amp;D2S7=120 -i&amp;C0"
RESET="-kZ"
SPKR="-iM1L0"
RXINIT=""
TXINIT=""
DATECMD='date +%c'
HDR='$DATE     $FROM      $NAME     s. %d/%d'
BUSYRETRIES="30 60 120 300 60 600 60 60 1200 60 60"
NICE="nice -n -10"
RM="/bin/rm -f"
LS="/bin/ls"
VERB="ewin"
VERBLOG="chewmainrxtf
CONSOLE=/dev/console
FAXDIR=/var/spool/fax
LOGDIR=/var/log/fax
ANSFNAME="%d%b%H%M%S"
UMASK=022
FAXMGR=<emphasis>faks geldiğinde eposta ile uyarılacak kullanıcı adı</emphasis>
SENDMAIL=/usr/sbin/sendmail
NOTIFY='faxmail "$REMID" "$f" $FILES | $SENDMAIL $FAXMGR'
# <emphasis>telefon kaç defa çaldıktan sonra yanıt verilecek:</emphasis>
ANSRINGS=4
DATAOPT="-j&amp;C1 -j+FCLASS=0 -jS7=30"
DCMD="exec /sbin/getty -h $DEV %d vt100"
FONE=/usr/bin/fone
VCMD="exec $FONE %d"
OWNER=root.tty
MODE=666
NOLOG='[145]'
# ****************************************************************
# --- End of user configuration section ---
# ****************************************************************
</screen>
     </para>
     <para>
Dosyada bu değerler açıklama satırlarının aralarına serpiştirilmiş durumda; sizin dosyanızda bu değerleri bulup bunlarla karşılaştırın. Bunlar benim ayarlarım; bazı özel değerlerin yerine ne yazılacağını belirttim. Bu değerlerin bazılarını /etc/efax.rc dosyasına da yazmak gerekiyor. Değişken adları aynı. Bunları bulup onları da özelleştirin.
  </para>
     <para>
Yine aynı dosyada kodların bulunduğu bölümde bazı düzeltmeler var. 619. satırı iptal edip altına doğrusunu yazın:
  </para>
     <para>
      <screen>
#     cfile=`tail -1 lock`
      cfile=`/usr/bin/tail -1 lock`
</screen>
     </para>
     <para>
Yapılandırma kılavuzunda başka düzeltmeler de önerilmişti ama onlar zaten öyleydi. Ben sadece bu satırı düzelttim (efax-0.9). [Aslında gerekli değil, zaten bu dizin normal arama yollarında var.]
  </para>
     <para><filename>/var/spool/fax</filename> diye bir dizin yoksa oluşturun ve erişim izinlerini düzenleyin:
  </para>
     <para>
      <screen># <userinput>mkdir /var/spool/fax</userinput>
# <userinput>chmod 777 /var/spool/fax</userinput>
</screen>
     </para>
     <para><filename>/var/lock</filename> dizininin erişim izinlerini düzenleyin:
  </para>
     <para>
      <screen># <userinput>chmod 1777 /var/lock</userinput>
</screen>
     </para>
     <para>
efax-gtk uygulamasının bir Ayarlar diyaloğu var ama <filename>/etc/efax-gtkrc</filename> dosyasında orada bulunmayan bazı ayarlar var. Bunları bu dosyada yaparsanız, bazı sürprizlerle karşılaşmazsınız. Ben yine dosyadaki açıklamaları ve iptal edilmiş değişkenleri atlayıp sadece geçerli değişkenleri alacağım; benim ayarlarım şöyle:
  </para>
     <para><screen>
NAME: <emphasis>adınızı ve soyadınızı yazın</emphasis>
NUMBER: +90 <emphasis>üç_haneli_alankodu yedi_haneli_abone_nr</emphasis>
DEVICE: modem
LOCK: /var/lock
PAGE: a4
RES: fine
RINGS: 4
DIALMODE: tone
INIT: Z &amp;FE&amp;D2S7=120 &amp;C0 M1L0
RESET: Z
PRINT_CMD: lpr
PRINT_SHRINK: 98
PRINT_POPUP: Yes
PS_VIEWER: kghostview
SOCK_SERVER: Yes
SOCK_POPUP: Yes
SOCK_SERVER_PORT: 9900
SOCK_CLIENT_ADDRESS: localhost
FAX_RECEIVED_POPUP: Yes
FAX_RECEIVED_EXEC: No
</screen>
Artık yeni yazıcımızı CUPS'a tanıtmaya hazırız. CUPS'u yeniden başlatın:
  </para>
     <para>
      <screen>
# <userinput>/etc/init.d/cupsys restart</userinput>
</screen>
     </para>
     <para>
Tarayıcınızın adres alanına  <uri xlink:href="http://127.0.0.1:631/">http://127.0.0.1:631/</uri> yazın (ya da bağa sağ tıklayıp yeni bir tarayıcıda sayfayı açın). Printers -&gt; Add Printer seçimini yapın. Parola istenecek kullanıcı adı olarak root, parola olarak root parolasını verin ve adım adım şu değerleri girin:
</para>
     <literallayout class="normal">
    Name: <command>FAKS</command>
    Location: <command>localhost</command>
    Description: <command>Faks Yazıcı</command>
      &lt;Continue&gt;
    Device: <command>AppSocket/HP JetDirect</command>
      &lt;Continue&gt;
    Device URI: <command>socket://localhost:9900</command>
      &lt;Continue&gt;
    Make: <command>efax</command>
      &lt;Continue&gt;
    Model: <command>efax</command>
      &lt;Continue&gt;
    Printer <command>FAKS</command> has been added successfully.
</literallayout>
     <para>
Böylece faks gönderirken yazdığımız metni tıpkı bir yazıcıya yazdırır gibi yazdırabileceğiz. Ancak işimiz bitmedi. Faks yazıcımızın kuyruğuna gönderilen işleri diğerleriyle karışmadan doğru alıcısına göndermek lazım. Bunun için efax-gtk uygulamasını kullanacağız. Masaüstü menünüzden efax-gtk'yı bulup çalıştırın. Menüsünden File -&gt; Settings seçin, Açılan pencerede
<filename>/etc/efax-gtkrc</filename> dosyasında yazdıklarınızı görüyor olmalısınız. Tamam düğmesine tıklayıp Ayarlar penceresini kapatın. "Fax to Send" bölümünde "Fax entry method" olarak "Socket" düğmesini seçili hale getirin ve aşağıdaki "Standby" düğmesine tıklayıp uygulamanın gelecek faksları almak üzere modemi dinlemeye başlamasını sağlayın ve uygulamayı küçültüp panele yollayın.
  </para>
     <para>
Şimdi bir OpenOffice.org writer açıp yaptıklarınızı sınayabilirsiniz. Örneğin üstteki paragrafı OOo'ya kopyalayın ve menüden Dosya -&gt; Yazdır seçin. Açılan pencereden Yazıcı adı olarak FAKS'ı seçin. İsterseniz, Seçenekler ve Özellikler düğmelerinden diğer ayarlara bakın. Tamam'a tıkladığınızda, efax-gtk, kuyruğa bir iş geldiğini bildiren bir pencere açacak ve sizden alıcının abone numarasını girmenizi isteyecektir. Send'e tıkladığınızda faksınız gönderilmeye başlayacaktır.
  </para>
     <para>
Kişisel faksınız hayırlı olsun.
  </para>
    </section>
   </article>
